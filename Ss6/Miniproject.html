<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function libraryManagementSystem() {
            // --- A. CHỨC NĂNG BẢO MẬT ---
            let attempts = 0;
            while (attempts < 3) {
                let user = prompt("Tên đăng nhập:");
                let pass = prompt("Mật khẩu:");

                if (user === "admin" && pass === "12345") {
                    alert("Đăng nhập thành công!");
                    break;
                } else {
                    attempts++;
                    if (attempts === 3) {
                        alert("Tài khoản đã bị khóa!");
                        return; // Thoát chương trình
                    }
                    alert(`Sai thông tin! Bạn còn ${3 - attempts} lần thử.`);
                }
            }

            // --- B. KHỞI TẠO DỮ LIỆU ---
            let libraries = ["Toán", "Văn", "Anh"];
            let choice;

            // --- C. HỆ THỐNG MENU ---
            do {
                choice = prompt(`--- MENU QUẢN LÝ ---
1. Nhập thêm lô sách mới
2. Hiển thị danh sách sách
3. Tìm kiếm sách
4. Cập nhật tên sách
5. Đảo ngược thứ tự kệ sách
6. Nhập kho từ nguồn khác
7. Thoát chương trình
Vui lòng chọn (1-7):`);

                switch (choice) {
                    case "1": // Nhập lô sách
                        let input = prompt("Nhập danh sách tên sách (cách nhau bởi dấu phẩy):");
                        if (input) {
                            let newBooks = input.split(","); // Tách chuỗi thành mảng
                            newBooks.forEach(item => {
                                let name = item.trim();
                                if (name !== "") libraries.push(name);
                            });
                            alert(`Đã thêm thành công ${newBooks.length} cuốn sách mới.`);
                        }
                        break;

                    case "2": // Hiển thị danh sách (In kết quả)
                        console.clear();
                        console.log("--- DANH SÁCH SÁCH HIỆN CÓ ---");
                        // Dùng map để tạo danh sách có số thứ tự
                        let listShow = libraries.map((book, i) => `${i + 1}. ${book}`);
                        console.log(listShow.join("\n"));
                        alert("KẾT QUẢ TRONG CONSOLE:\n" + listShow.join("\n"));
                        break;

                    case "3": // Tìm kiếm
                        let findName = prompt("Nhập tên cuốn sách cần tìm:");
                        let pos = libraries.indexOf(findName);
                        if (pos !== -1) {
                            alert(`Sách "${findName}" được tìm thấy tại vị trí (index) ${pos}`);
                        } else {
                            alert("Không tìm thấy sách trong kho.");
                        }
                        break;

                    case "4": // Cập nhật
                        let oldName = prompt("Nhập tên sách cần sửa:");
                        let editIdx = libraries.indexOf(oldName);
                        if (editIdx !== -1) {
                            let newName = prompt(`Tìm thấy sách. Nhập tên mới cho "${oldName}":`);
                            libraries[editIdx] = newName;
                            alert("Cập nhật thành công!");
                        } else {
                            alert("Sách không tồn tại để sửa.");
                        }
                        break;

                    case "5": // Đảo ngược
                        libraries.reverse();
                        console.clear();
                        console.log("--- DANH SÁCH SAU KHI ĐẢO NGƯỢC ---");
                        libraries.forEach((book, i) => console.log(`Vị trí index [${i}]: ${book}`));
                        alert("Đã đảo ngược kệ sách. Kiểm tra Console!");
                        break;

                    case "6": // Nhập kho nguồn khác
                        let extra = ["Sách Kỹ Năng", "Truyện Tranh"];
                        libraries = libraries.concat(extra);
                        alert("Đã gộp kho sách thành công.");
                        break;

                    case "7":
                        alert("Hẹn gặp lại!");
                        break;

                    default:
                        if (choice !== null) alert("Lựa chọn không hợp lệ!");
                }
            } while (choice !== "7" && choice !== null);
        }

        // Chạy chương trình
        libraryManagementSystem();
    </script>
</body>

</html>